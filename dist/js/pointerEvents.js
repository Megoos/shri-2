var PointerEvent=function(){var t=function(t,e){return t>e?e:t<1?1:t},e=function(t,e,i){return t>e*i-e?e*i-e:t<e-e*i?e-e*i:t},i=function(t){return t>200?200:t<0?0:t};return function(){function n(t,e,i){this.maxZoom=4,this.evCache=[],this.prevDiff=-1,this.startMoveX=-1,this.startMoveY=-1,this.el=t,this.zoom=1.5,this.elWidth=e,this.elHeight=i,this.currentLeft=0,this.currentBottom=0,this.currentBrightness=100,this.prevRotate=-1,this.action="none"}return n.prototype.pointerupHandler=function(t){this.evCache=function(t,e){for(var i=0;i<e.length;i++)if(e[i].pointerId===t.pointerId){e.splice(i,1);break}return e}(t,this.evCache),this.action="none",this.startMoveX=-1,this.startMoveY=-1},n.prototype.pointerdownHandler=function(t){this.evCache.push(t),this.startMoveX=t.clientX,this.startMoveY=t.clientY},n.prototype.pointermoveHandler=function(n){for(var o=0;o<this.evCache.length;o++)if(n.pointerId===this.evCache[o].pointerId){this.evCache[o]=n;break}if(2===this.evCache.length){var r=Math.sqrt(Math.pow(this.evCache[0].clientX-this.evCache[1].clientX,2)+Math.pow(this.evCache[0].clientY-this.evCache[1].clientY,2))/3e3,s=Math.abs(180*Math.atan2(this.evCache[0].clientY-this.evCache[1].clientY,this.evCache[0].clientX-this.evCache[1].clientX)/Math.PI*.02);2.85*r>s&&"rotate"!==this.action||"zoom"===this.action?(r>this.prevDiff&&(this.zoom=t(r+this.zoom,this.maxZoom),this.el.style.transform="scale("+this.zoom+")"),r<this.prevDiff&&(this.zoom=t(this.zoom-r,this.maxZoom),this.el.style.transform="scale("+this.zoom+")",this.currentLeft=e(this.currentLeft,this.elWidth,this.zoom),this.currentBottom=e(this.currentBottom,this.elHeight,this.zoom),this.el.style.left=this.currentLeft+"px",this.el.style.bottom=this.currentBottom+"px"),this.action="zoom",document.getElementById("zoom").textContent="1 : "+this.zoom.toFixed(2)):(this.prevRotate>1.9||"rotate"===this.action)&&(s>this.prevRotate&&(this.currentBrightness=i(s+this.currentBrightness)),s<this.prevRotate&&(this.currentBrightness=i(this.currentBrightness-s)),this.el.style.filter="brightness("+this.currentBrightness.toFixed(0)+"%)",this.action="rotate",document.getElementById("brightness").textContent=this.currentBrightness.toFixed(0)+"%"),this.prevRotate=s,this.prevDiff=r}else if(this.startMoveX>0||this.startMoveY>0){var h=n.clientX-this.startMoveX,a=this.startMoveY-n.clientY;this.currentLeft=e(this.currentLeft+h,this.elWidth,this.zoom),this.currentBottom=e(this.currentBottom+a,this.elHeight,this.zoom),this.el.style.left=this.currentLeft+"px",this.el.style.bottom=this.currentBottom+"px",this.startMoveX=n.clientX,this.startMoveY=n.clientY}},n}()}();function init(){var t=document.getElementById("camImage");t.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),!1};var e=new PointerEvent(t,t.offsetWidth/2,t.offsetHeight/2);t.addEventListener("pointerdown",function(t){return e.pointerdownHandler(t)}),t.addEventListener("pointermove",function(t){return e.pointermoveHandler(t)}),t.addEventListener("pointerup",function(t){return e.pointerupHandler(t)}),t.addEventListener("pointercancel",function(t){return e.pointerupHandler(t)}),t.addEventListener("pointerout",function(t){return e.pointerupHandler(t)}),t.addEventListener("pointerleave",function(t){return e.pointerupHandler(t)})}window.onload=function(){init()};