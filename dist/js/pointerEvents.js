var pointerEvent=function(){const t=function(t,e){return t>e?e:t<1?1:t},e=function(t,e,i){return t>e*i-e?e*i-e:t<e-e*i?e-e*i:t},i=function(t){return t>200?200:t<0?0:t},n=function(t,e){for(var i=0;i<e.length;i++)if(e[i].pointerId==t.pointerId){e.splice(i,1);break}return e};return class{constructor(t,e,i){this.maxZoom=4,this.evCache=[],this.prevDiff=-1,this.startMoveX=-1,this.startMoveY=-1,this.el=t,this.zoom=1.5,this.elWidth=e,this.elHeight=i,this.currentLeft=0,this.currentBottom=0,this.currentBrightness=100,this.prevRotate=-1,this.action="none"}pointerup_handler(t){this.evCache=n(t,this.evCache),this.action="none",this.startMoveX=-1,this.startMoveY=-1}pointerdown_handler(t){this.evCache.push(t),this.startMoveX=t.clientX,this.startMoveY=t.clientY}pointermove_handler(n){for(var s=0;s<this.evCache.length;s++)if(n.pointerId==this.evCache[s].pointerId){this.evCache[s]=n;break}if(2==this.evCache.length){var o=Math.sqrt(Math.pow(this.evCache[0].clientX-this.evCache[1].clientX,2)+Math.pow(this.evCache[0].clientY-this.evCache[1].clientY,2))/3e3,h=Math.abs(180*Math.atan2(this.evCache[0].clientY-this.evCache[1].clientY,this.evCache[0].clientX-this.evCache[1].clientX)/Math.PI*.02);2.85*o>h&&"rotate"!==this.action||"zoom"===this.action?(o>this.prevDiff&&(this.zoom=t(o+this.zoom,this.maxZoom),this.el.style.transform=`scale(${this.zoom})`),o<this.prevDiff&&(this.zoom=t(this.zoom-o,this.maxZoom),this.el.style.transform=`scale(${this.zoom})`,this.currentLeft=e(this.currentLeft,this.elWidth,this.zoom),this.currentBottom=e(this.currentBottom,this.elHeight,this.zoom),this.el.style.left=this.currentLeft+"px",this.el.style.bottom=this.currentBottom+"px"),this.action="zoom",document.getElementById("zoom").textContent=`1 : ${this.zoom.toFixed(2)}`):(this.prevRotate>1.9||"rotate"===this.action)&&(h>this.prevRotate&&(this.currentBrightness=i(h+this.currentBrightness)),h<this.prevRotate&&(this.currentBrightness=i(this.currentBrightness-h)),this.el.style.filter=`brightness(${this.currentBrightness.toFixed(0)}%)`,this.action="rotate",document.getElementById("brightness").textContent=this.currentBrightness.toFixed(0)+"%"),this.prevRotate=h,this.prevDiff=o}else if(this.startMoveX>0||this.startMoveY>0){const t=n.clientX-this.startMoveX,i=this.startMoveY-n.clientY;this.currentLeft=e(this.currentLeft+t,this.elWidth,this.zoom),this.currentBottom=e(this.currentBottom+i,this.elHeight,this.zoom),this.el.style.left=this.currentLeft+"px",this.el.style.bottom=this.currentBottom+"px",this.startMoveX=n.clientX,this.startMoveY=n.clientY}}}}();function init(){var t=document.getElementById("camImage");t.oncontextmenu=function(t){return t.preventDefault(),t.stopPropagation(),!1};var e=new pointerEvent(t,t.offsetWidth/2,t.offsetHeight/2);t.addEventListener("pointerdown",t=>e.pointerdown_handler(t)),t.addEventListener("pointermove",t=>e.pointermove_handler(t)),t.addEventListener("pointerup",t=>e.pointerup_handler(t)),t.addEventListener("pointercancel",t=>e.pointerup_handler(t)),t.addEventListener("pointerout",t=>e.pointerup_handler(t)),t.addEventListener("pointerleave",t=>e.pointerup_handler(t))}window.onload=function(){init()};