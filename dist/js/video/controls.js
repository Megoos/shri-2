var videos=document.querySelectorAll(".video"),inputs=document.querySelectorAll(".video-range__input"),muteButtons=document.querySelectorAll(".mute-button");function analyserInit(t){const e=new(window.AudioContext||window.webkitAudioContext),n=e.createMediaElementSource(t),o=e.createAnalyser();o.smoothingTimeConstant=.1,o.fftSize=32;let i=new Uint8Array(o.frequencyBinCount);const r=t.parentNode.querySelector(".video-canvas"),l=t.parentNode.querySelector(".video-analyzer_block"),a=r.getContext("2d");setInterval(function(){o.getByteFrequencyData(i);let t=0;for(let e=0;e<i.length;e++)i[e]>t&&(t=i[e]);r.height=l.offsetHeight,a.clearRect(0,0,r.width,r.height),a.fillStyle="#fdf036",a.fillRect(0,0,30,t/2)},100),n.connect(o),o.connect(e.destination)}inputs.forEach(t=>{t.oninput=function(){const{videoNum:t,type:e}=this.dataset,n=videos[parseInt(t,10)-1];this.nextElementSibling.textContent=this.value+"%",n.dataset[e]=this.value;const{brightness:o,contrast:i}=n.dataset;n.style.filter=`brightness(${o}%) contrast(${i}%)`}}),videos.forEach(t=>{analyserInit(t)}),muteButtons.forEach(t=>{t.onclick=function(){const e=t.parentNode.previousElementSibling;e.muted?(e.muted=!1,t.textContent="on",t.style.backgroundColor="green"):(e.muted=!0,t.textContent="off",t.style.backgroundColor="red")}});