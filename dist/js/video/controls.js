"use strict";var videos=document.querySelectorAll(".video"),inputs=document.querySelectorAll(".video-range__input"),muteButtons=document.querySelectorAll(".mute-button");function analyserInit(e){var t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaElementSource(e),o=t.createAnalyser();o.smoothingTimeConstant=.1,o.fftSize=32;var r=new Uint8Array(o.frequencyBinCount),i=e.parentNode&&e.parentNode.querySelector(".video-canvas"),a=e.parentNode&&e.parentNode.querySelector(".video-analyzer_block");if(i&&a){var u=i.getContext("2d");i&&a&&u&&(setInterval(function(){o.getByteFrequencyData(r);for(var e=0,t=0;t<r.length;t++)r[t]>e&&(e=r[t]);i.height=a.offsetHeight,u.clearRect(0,0,i.width,i.height),u.fillStyle="#fdf036",u.fillRect(0,0,30,e/2)},100),n.connect(o),o.connect(t.destination))}}inputs.forEach(function(e){e.oninput=function(e){var t=e.target,n=t.dataset,o=n.videoNum,r=n.type;if(o&&r){var i=videos[parseInt(o,10)-1];t.nextElementSibling&&(t.nextElementSibling.textContent=t.value+"%"),i.dataset[r]=t.value;var a=i.dataset,u=a.brightness,l=a.contrast;i.style.filter="brightness("+u+"%) contrast("+l+"%)"}}}),videos.forEach(function(e){analyserInit(e)}),muteButtons.forEach(function(e){e.onclick=function(){var t=e.parentNode.previousElementSibling;t.muted?(t.muted=!1,e.textContent="on",e.style.backgroundColor="green"):(t.muted=!0,e.textContent="off",e.style.backgroundColor="red")}});