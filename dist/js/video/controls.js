var videos=document.querySelectorAll(".video"),inputs=document.querySelectorAll(".video-range__input"),muteButtons=document.querySelectorAll(".mute-button");function analyserInit(e){var t=new(window.AudioContext||window.webkitAudioContext),n=t.createMediaElementSource(e),o=t.createAnalyser();o.smoothingTimeConstant=.1,o.fftSize=32;var i=new Uint8Array(o.frequencyBinCount),r=e.parentNode.querySelector(".video-canvas"),a=e.parentNode.querySelector(".video-analyzer_block"),u=r.getContext("2d");setInterval(function(){o.getByteFrequencyData(i);for(var e=0,t=0;t<i.length;t++)i[t]>e&&(e=i[t]);r.height=a.offsetHeight,u.clearRect(0,0,r.width,r.height),u.fillStyle="#fdf036",u.fillRect(0,0,30,e/2)},100),n.connect(o),o.connect(t.destination)}inputs.forEach(function(e){e.oninput=function(){var e=this.dataset,t=e.videoNum,n=e.type,o=videos[parseInt(t,10)-1];this.nextElementSibling.textContent=this.value+"%",o.dataset[n]=this.value;var i=o.dataset,r=i.brightness,a=i.contrast;o.style.filter="brightness("+r+"%) contrast("+a+"%)"}}),videos.forEach(function(e){analyserInit(e)}),muteButtons.forEach(function(e){e.onclick=function(){var t=e.parentNode.previousElementSibling;t.muted?(t.muted=!1,e.textContent="on",e.style.backgroundColor="green"):(t.muted=!0,e.textContent="off",e.style.backgroundColor="red")}});