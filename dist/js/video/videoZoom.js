"use strict";var videoContainers=document.querySelectorAll(".info-item"),wrapper=document.querySelector(".wrapper"),backLayer=document.querySelector(".back-layer");function transformation(e){if(!document.documentElement||!wrapper)return{translate:{x:0,y:0},scale:1};var t=document.documentElement,a=t.clientWidth,r=t.clientHeight,s=a/2,n=r/2,o=e.clientWidth,i=e.clientHeight;return{translate:{x:s-(o/2+e.offsetLeft),y:n-(i/2+e.offsetTop-wrapper.scrollTop)},scale:Math.min(a/o,r/i)}}function zoomVideo(e){var t=videoContainers[parseInt(e,10)-1],a=e;if(store.getState()[a].isActive){var r=transformation(t),s=r.translate,n=r.scale;t.style.transform="translate("+s.x+"px, "+s.y+"px) scale("+n+")",t.classList.add("active"),wrapper&&wrapper.classList.add("fullscreen"),backLayer&&backLayer.classList.add("active")}else t.style.transform="translate(0px, 0px) scale(1)",backLayer&&backLayer.classList.remove("active"),setTimeout(function(){t.classList.remove("active"),wrapper&&wrapper.classList.remove("fullscreen")},300)}videos.forEach(function(e){var t=e.dataset.videoNum;if(t){var a=t,r=store.getState()[a];e.style.filter="brightness("+r.brightness+"%) contrast("+r.contrast+"%)",r.isActive&&zoomVideo(t),e.addEventListener("mousedown",function(){store.dispatch({type:"CHANGE_ACTIVE",payload:{num:t}}),requestAnimationFrame(function(){zoomVideo(t)})})}});